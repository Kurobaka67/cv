import{b9 as R,I as Ve,ba as Z,bb as le,H as _,bc as je,aS as W,bd as q,be as oe,bf as we}from"./index-Dy2JIHED.js";var De=Object.defineProperty,Te=Object.defineProperties,Ee=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,de=Object.prototype.propertyIsEnumerable,ne=(e,t,s)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,v=(e,t)=>{for(var s in t||(t={}))ce.call(t,s)&&ne(e,s,t[s]);if(F)for(var s of F(t))de.call(t,s)&&ne(e,s,t[s]);return e},J=(e,t)=>Te(e,Ee(t)),y=(e,t)=>{var s={};for(var r in e)ce.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(e!=null&&F)for(var r of F(e))t.indexOf(r)<0&&de.call(e,r)&&(s[r]=e[r]);return s},Ae=we(),b=Ae,Q=/{([^}]*)}/g,ze=/(\d+\s+[\+\-\*\/]\s+\d+)/g,Me=/var\([^)]+\)/g;function Ke(e){return q(e)&&e.hasOwnProperty("$value")&&e.hasOwnProperty("$type")?e.$value:e}function Be(e){return e.replaceAll(/ /g,"").replace(/[^\w]/g,"-")}function Y(e="",t=""){return Be(`${Z(e,!1)&&Z(t,!1)?`${e}-`:e}${t}`)}function me(e="",t=""){return`--${Y(e,t)}`}function Ie(e=""){const t=(e.match(/{/g)||[]).length,s=(e.match(/}/g)||[]).length;return(t+s)%2!==0}function he(e,t="",s="",r=[],a){if(Z(e)){const n=e.trim();if(Ie(n))return;if(R(n,Q)){const l=n.replaceAll(Q,i=>{const c=i.replace(/{|}/g,"").split(".").filter(d=>!r.some(u=>R(d,u)));return`var(${me(s,le(c.join("-")))}${_(a)?`, ${a}`:""})`});return R(l.replace(Me,"0"),ze)?`calc(${l})`:l}return n}else if(je(e))return e}function Xe(e,t,s){Z(t,!1)&&e.push(`${t}:${s};`)}function N(e,t){return e?`${e}{${t}}`:""}var He=e=>{var t;const s=x.getTheme(),r=ee(s,e,void 0,"variable"),a=(t=r==null?void 0:r.match(/--[\w-]+/g))==null?void 0:t[0],n=ee(s,e,void 0,"value");return{name:a,variable:r,value:n}},ie=(...e)=>ee(x.getTheme(),...e),ee=(e={},t,s,r)=>{if(t){const{variable:a,options:n}=x.defaults||{},{prefix:l,transform:i}=(e==null?void 0:e.options)||n||{},o=R(t,Q)?t:`{${t}}`;return r==="value"||Ve(r)&&i==="strict"?x.getTokenValue(t):he(o,void 0,l,[a.excludedKeyRegex],s)}return""};function Ge(e,t={}){const s=x.defaults.variable,{prefix:r=s.prefix,selector:a=s.selector,excludedKeyRegex:n=s.excludedKeyRegex}=t,l=[],i=[],o=[{node:e,path:r}];for(;o.length;){const{node:d,path:u}=o.pop();for(const m in d){const h=d[m],f=Ke(h),S=R(m,n)?Y(u):Y(u,le(m));if(q(f))o.push({node:f,path:S});else{const $=me(S),k=he(f,S,r,[n]);Xe(i,$,k);let g=S;r&&g.startsWith(r+"-")&&(g=g.slice(r.length+1)),l.push(g.replace(/-/g,"."))}}}const c=i.join("");return{value:i,tokens:l,declarations:c,css:N(a,c)}}var p={regex:{rules:{class:{pattern:/^\.([a-zA-Z][\w-]*)$/,resolve(e){return{type:"class",selector:e,matched:this.pattern.test(e.trim())}}},attr:{pattern:/^\[(.*)\]$/,resolve(e){return{type:"attr",selector:`:root${e}`,matched:this.pattern.test(e.trim())}}},media:{pattern:/^@media (.*)$/,resolve(e){return{type:"media",selector:`${e}{:root{[CSS]}}`,matched:this.pattern.test(e.trim())}}},system:{pattern:/^system$/,resolve(e){return{type:"system",selector:"@media (prefers-color-scheme: dark){:root{[CSS]}}",matched:this.pattern.test(e.trim())}}},custom:{resolve(e){return{type:"custom",selector:e,matched:!0}}}},resolve(e){const t=Object.keys(this.rules).filter(s=>s!=="custom").map(s=>this.rules[s]);return[e].flat().map(s=>{var r;return(r=t.map(a=>a.resolve(s)).find(a=>a.matched))!=null?r:this.rules.custom.resolve(s)})}},_toVariables(e,t){return Ge(e,{prefix:t==null?void 0:t.prefix})},getCommon({name:e="",theme:t={},params:s,set:r,defaults:a}){var n,l,i,o,c,d,u;const{preset:m,options:h}=t;let f,C,S,$,k,g,V;if(_(m)&&h.transform!=="strict"){const{primitive:j,semantic:w,extend:D}=m,O=w||{},{colorScheme:T}=O,E=y(O,["colorScheme"]),A=D||{},{colorScheme:z}=A,P=y(A,["colorScheme"]),L=T||{},{dark:M}=L,K=y(L,["dark"]),B=z||{},{dark:I}=B,X=y(B,["dark"]),G=_(j)?this._toVariables({primitive:j},h):{},U=_(E)?this._toVariables({semantic:E},h):{},H=_(K)?this._toVariables({light:K},h):{},te=_(M)?this._toVariables({dark:M},h):{},se=_(P)?this._toVariables({semantic:P},h):{},re=_(X)?this._toVariables({light:X},h):{},ae=_(I)?this._toVariables({dark:I},h):{},[ue,_e]=[(n=G.declarations)!=null?n:"",G.tokens],[pe,ve]=[(l=U.declarations)!=null?l:"",U.tokens||[]],[ge,fe]=[(i=H.declarations)!=null?i:"",H.tokens||[]],[Se,ye]=[(o=te.declarations)!=null?o:"",te.tokens||[]],[ke,be]=[(c=se.declarations)!=null?c:"",se.tokens||[]],[$e,Ne]=[(d=re.declarations)!=null?d:"",re.tokens||[]],[Re,Ce]=[(u=ae.declarations)!=null?u:"",ae.tokens||[]];f=this.transformCSS(e,ue,"light","variable",h,r,a),C=_e;const Oe=this.transformCSS(e,`${pe}${ge}`,"light","variable",h,r,a),Pe=this.transformCSS(e,`${Se}`,"dark","variable",h,r,a);S=`${Oe}${Pe}`,$=[...new Set([...ve,...fe,...ye])];const Le=this.transformCSS(e,`${ke}${$e}color-scheme:light`,"light","variable",h,r,a),xe=this.transformCSS(e,`${Re}color-scheme:dark`,"dark","variable",h,r,a);k=`${Le}${xe}`,g=[...new Set([...be,...Ne,...Ce])],V=W(m.css,{dt:ie})}return{primitive:{css:f,tokens:C},semantic:{css:S,tokens:$},global:{css:k,tokens:g},style:V}},getPreset({name:e="",preset:t={},options:s,params:r,set:a,defaults:n,selector:l}){var i,o,c;let d,u,m;if(_(t)&&s.transform!=="strict"){const h=e.replace("-directive",""),f=t,{colorScheme:C,extend:S,css:$}=f,k=y(f,["colorScheme","extend","css"]),g=S||{},{colorScheme:V}=g,j=y(g,["colorScheme"]),w=C||{},{dark:D}=w,O=y(w,["dark"]),T=V||{},{dark:E}=T,A=y(T,["dark"]),z=_(k)?this._toVariables({[h]:v(v({},k),j)},s):{},P=_(O)?this._toVariables({[h]:v(v({},O),A)},s):{},L=_(D)?this._toVariables({[h]:v(v({},D),E)},s):{},[M,K]=[(i=z.declarations)!=null?i:"",z.tokens||[]],[B,I]=[(o=P.declarations)!=null?o:"",P.tokens||[]],[X,G]=[(c=L.declarations)!=null?c:"",L.tokens||[]],U=this.transformCSS(h,`${M}${B}`,"light","variable",s,a,n,l),H=this.transformCSS(h,X,"dark","variable",s,a,n,l);d=`${U}${H}`,u=[...new Set([...K,...I,...G])],m=W($,{dt:ie})}return{css:d,tokens:u,style:m}},getPresetC({name:e="",theme:t={},params:s,set:r,defaults:a}){var n;const{preset:l,options:i}=t,o=(n=l==null?void 0:l.components)==null?void 0:n[e];return this.getPreset({name:e,preset:o,options:i,params:s,set:r,defaults:a})},getPresetD({name:e="",theme:t={},params:s,set:r,defaults:a}){var n,l;const i=e.replace("-directive",""),{preset:o,options:c}=t,d=((n=o==null?void 0:o.components)==null?void 0:n[i])||((l=o==null?void 0:o.directives)==null?void 0:l[i]);return this.getPreset({name:i,preset:d,options:c,params:s,set:r,defaults:a})},applyDarkColorScheme(e){return!(e.darkModeSelector==="none"||e.darkModeSelector===!1)},getColorSchemeOption(e,t){var s;return this.applyDarkColorScheme(e)?this.regex.resolve(e.darkModeSelector===!0?t.options.darkModeSelector:(s=e.darkModeSelector)!=null?s:t.options.darkModeSelector):[]},getLayerOrder(e,t={},s,r){const{cssLayer:a}=t;return a?`@layer ${W(a.order||"primeui",s)}`:""},getCommonStyleSheet({name:e="",theme:t={},params:s,props:r={},set:a,defaults:n}){const l=this.getCommon({name:e,theme:t,params:s,set:a,defaults:n}),i=Object.entries(r).reduce((o,[c,d])=>o.push(`${c}="${d}"`)&&o,[]).join(" ");return Object.entries(l||{}).reduce((o,[c,d])=>{if(q(d)&&Object.hasOwn(d,"css")){const u=oe(d.css),m=`${c}-variables`;o.push(`<style type="text/css" data-primevue-style-id="${m}" ${i}>${u}</style>`)}return o},[]).join("")},getStyleSheet({name:e="",theme:t={},params:s,props:r={},set:a,defaults:n}){var l;const i={name:e,theme:t,params:s,set:a,defaults:n},o=(l=e.includes("-directive")?this.getPresetD(i):this.getPresetC(i))==null?void 0:l.css,c=Object.entries(r).reduce((d,[u,m])=>d.push(`${u}="${m}"`)&&d,[]).join(" ");return o?`<style type="text/css" data-primevue-style-id="${e}-variables" ${c}>${oe(o)}</style>`:""},createTokens(e={},t,s="",r="",a={}){return{}},getTokenValue(e,t,s){var r;const n=(o=>o.split(".").filter(d=>!R(d.toLowerCase(),s.variable.excludedKeyRegex)).join("."))(t),l=t.includes("colorScheme.light")?"light":t.includes("colorScheme.dark")?"dark":void 0,i=[(r=e[n])==null?void 0:r.computed(l)].flat().filter(o=>o);return i.length===1?i[0].value:i.reduce((o={},c)=>{const d=c,{colorScheme:u}=d,m=y(d,["colorScheme"]);return o[u]=m,o},void 0)},getSelectorRule(e,t,s,r){return s==="class"||s==="attr"?N(_(t)?`${e}${t},${e} ${t}`:e,r):N(e,_(t)?N(t,r):r)},transformCSS(e,t,s,r,a={},n,l,i){if(_(t)){const{cssLayer:o}=a;if(r!=="style"){const c=this.getColorSchemeOption(a,l);t=s==="dark"?c.reduce((d,{type:u,selector:m})=>(_(m)&&(d+=m.includes("[CSS]")?m.replace("[CSS]",t):this.getSelectorRule(m,i,u,t)),d),""):N(i??":root",t)}if(o){const c={name:"primeui",order:"primeui"};q(o)&&(c.name=W(o.name,{name:e,type:r})),_(c.name)&&(t=N(`@layer ${c.name}`,t),n==null||n.layerNames(c.name))}return t}return""}},x={defaults:{variable:{prefix:"p",selector:":root",excludedKeyRegex:/^(primitive|semantic|components|directives|variables|colorscheme|light|dark|common|root|states|extend|css)$/gi},options:{prefix:"p",darkModeSelector:"system",cssLayer:!1}},_theme:void 0,_layerNames:new Set,_loadedStyleNames:new Set,_loadingStyles:new Set,_tokens:{},update(e={}){const{theme:t}=e;t&&(this._theme=J(v({},t),{options:v(v({},this.defaults.options),t.options)}),this._tokens=p.createTokens(this.preset,this.defaults),this.clearLoadedStyleNames())},get theme(){return this._theme},get preset(){var e;return((e=this.theme)==null?void 0:e.preset)||{}},get options(){var e;return((e=this.theme)==null?void 0:e.options)||{}},get tokens(){return this._tokens},getTheme(){return this.theme},setTheme(e){this.update({theme:e}),b.emit("theme:change",e)},getPreset(){return this.preset},setPreset(e){this._theme=J(v({},this.theme),{preset:e}),this._tokens=p.createTokens(e,this.defaults),this.clearLoadedStyleNames(),b.emit("preset:change",e),b.emit("theme:change",this.theme)},getOptions(){return this.options},setOptions(e){this._theme=J(v({},this.theme),{options:e}),this.clearLoadedStyleNames(),b.emit("options:change",e),b.emit("theme:change",this.theme)},getLayerNames(){return[...this._layerNames]},setLayerNames(e){this._layerNames.add(e)},getLoadedStyleNames(){return this._loadedStyleNames},isStyleNameLoaded(e){return this._loadedStyleNames.has(e)},setLoadedStyleName(e){this._loadedStyleNames.add(e)},deleteLoadedStyleName(e){this._loadedStyleNames.delete(e)},clearLoadedStyleNames(){this._loadedStyleNames.clear()},getTokenValue(e){return p.getTokenValue(this.tokens,e,this.defaults)},getCommon(e="",t){return p.getCommon({name:e,theme:this.theme,params:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getComponent(e="",t){const s={name:e,theme:this.theme,params:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return p.getPresetC(s)},getDirective(e="",t){const s={name:e,theme:this.theme,params:t,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return p.getPresetD(s)},getCustomPreset(e="",t,s,r){const a={name:e,preset:t,options:this.options,selector:s,params:r,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}};return p.getPreset(a)},getLayerOrderCSS(e=""){return p.getLayerOrder(e,this.options,{names:this.getLayerNames()},this.defaults)},transformCSS(e="",t,s="style",r){return p.transformCSS(e,t,r,s,this.options,{layerNames:this.setLayerNames.bind(this)},this.defaults)},getCommonStyleSheet(e="",t,s={}){return p.getCommonStyleSheet({name:e,theme:this.theme,params:t,props:s,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},getStyleSheet(e,t,s={}){return p.getStyleSheet({name:e,theme:this.theme,params:t,props:s,defaults:this.defaults,set:{layerNames:this.setLayerNames.bind(this)}})},onStyleMounted(e){this._loadingStyles.add(e)},onStyleUpdated(e){this._loadingStyles.add(e)},onStyleLoaded(e,{name:t}){this._loadingStyles.size&&(this._loadingStyles.delete(t),b.emit(`theme:${t}:load`,e),!this._loadingStyles.size&&b.emit("theme:load"))}};export{He as $};
